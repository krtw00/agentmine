# DBãƒã‚¹ã‚¿ãƒ¼æ–¹å¼

ğŸ¯ **Single Source of Truth**: ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã¯DBã§ç®¡ç†ã™ã‚‹

agentmineã¯**DBãƒã‚¹ã‚¿ãƒ¼æ–¹å¼**ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€ŒSingle Source of Truthã€è¨­è¨ˆåŸå‰‡ã®å…·ä½“çš„ãªå®Ÿè£…ã§ã™ã€‚

---

## åŸå‰‡

**ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¿ã‚¹ã‚¯ã€Agentã€Memoryã€è¨­å®šï¼‰ã¯DBã§ç®¡ç†ã™ã‚‹ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç”¨ã®ã¿ã€‚**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Single Source of Truth = DB                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Web UI â”€â”€â”                                                      â”‚
â”‚  CLI â”€â”€â”€â”€â”€â”¼â”€â”€â†’ DB (ãƒã‚¹ã‚¿ãƒ¼) â”€â”€â†’ Workerç”¨ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå‡ºåŠ›   â”‚
â”‚  MCP â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚                                                                 â”‚
â”‚  .agentmine/ ã¯ .gitignoreï¼ˆãƒªãƒã‚¸ãƒˆãƒªã«ã¯å«ã‚ãªã„ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç†ç”±

### 1. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§

**å•é¡Œ**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã ã¨åŒã˜æƒ…å ±ãŒè¤‡æ•°ç®‡æ‰€ã«å­˜åœ¨ã—ã€æ›´æ–°æ¼ã‚ŒãŒç™ºç”Ÿ

```
âŒ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ï¼ˆå¾“æ¥ï¼‰:
.agentmine/
â”œâ”€â”€ agents/coder.yaml        # Agentå®šç¾©
â”œâ”€â”€ prompts/coder.md         # promptContent
â””â”€â”€ settings.yaml            # è¨­å®š

â†’ coder.yamlã‚’æ›´æ–°ã—ãŸãŒã€prompts/coder.mdã®æ›´æ–°ã‚’å¿˜ã‚ŒãŸ
â†’ å¤ã„æƒ…å ±ã¨æ–°ã—ã„æƒ…å ±ãŒæ··åœ¨
```

```
âœ… DBãƒã‚¹ã‚¿ãƒ¼ï¼ˆagentmineï¼‰:
agents ãƒ†ãƒ¼ãƒ–ãƒ«
â”œâ”€â”€ name: "coder"
â”œâ”€â”€ prompt_content: "..."
â””â”€â”€ version: 3

â†’ 1ç®‡æ‰€æ›´æ–°ã™ã‚Œã°å…¨ã¦æœ€æ–°
â†’ æ•´åˆæ€§ãŒä¿è¨¼ã•ã‚Œã‚‹
```

### 2. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…±æœ‰

ãƒãƒ¼ãƒ å…¨å“¡ãŒå¸¸ã«æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å‚ç…§ï¼š

```typescript
// Web UIã§ç·¨é›†
await agentService.updateAgent('coder', { model: 'opus' });

// å³åº§ã«CLIã§åæ˜ 
$ agentmine agent show coder
model: opus  â† æœ€æ–°
```

### 3. å¤‰æ›´å±¥æ­´

DBã§å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç®¡ç†ï¼š

```typescript
// agentHistory ãƒ†ãƒ¼ãƒ–ãƒ«
{
  agentId: 1,
  version: 2,
  snapshot: { /* å¤‰æ›´å‰ã®çŠ¶æ…‹ */ },
  changedBy: "user-123",
  changedAt: "2026-01-20T10:00:00Z",
  changeSummary: "modelã‚’sonnetã‹ã‚‰opusã«å¤‰æ›´"
}
```

â†’ ã„ã¤ã€èª°ãŒã€ä½•ã‚’å¤‰æ›´ã—ãŸã‹ãƒˆãƒ¬ãƒ¼ã‚¹å¯èƒ½

### 4. æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

SQLã§åŠ¹ç‡çš„ãªã‚¯ã‚¨ãƒªï¼š

```typescript
// Memory Bankã‹ã‚‰ç‰¹å®šã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢
const memories = await db
  .select()
  .from(memories)
  .where(
    and(
      eq(memories.category, 'architecture'),
      eq(memories.status, 'active')
    )
  );
```

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã§ã¯`grep`ã‚„å…¨ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ãŒå¿…è¦ã€‚

---

## DBç®¡ç†ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿

| ãƒ‡ãƒ¼ã‚¿ | ãƒ†ãƒ¼ãƒ–ãƒ« | ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå‡ºåŠ› | ç”¨é€” |
|--------|---------|---------------------|------|
| **ã‚¿ã‚¹ã‚¯** | `tasks` | - | ã‚¿ã‚¹ã‚¯ç®¡ç† |
| **ã‚»ãƒƒã‚·ãƒ§ãƒ³** | `sessions` | - | å®Ÿè¡Œå±¥æ­´ |
| **Agentå®šç¾©** | `agents` | `.agentmine/agents/*.yaml` | ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ç§»è¡Œ |
| **Memory Bank** | `memories` | `worktree/.agentmine/memory/` | Workerå‚ç…§ |
| **è¨­å®š** | `settings` | `.agentmine/config.yaml` | ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ç§»è¡Œ |
| **ç›£æŸ»ãƒ­ã‚°** | `audit_logs` | - | ç›£æŸ» |
| **Agentå±¥æ­´** | `agent_history` | - | å¤‰æ›´å±¥æ­´ |
| **Memoryå±¥æ­´** | `memory_history` | - | å¤‰æ›´å±¥æ­´ |

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### ä½œæˆãƒ»æ›´æ–°ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Web UI     â”‚ â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â”‚ 1. ä½œæˆ/æ›´æ–°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  CLI        â”‚ â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  MCP        â”‚ â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    DB    â”‚ â† Single Source of Truth
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ 2. å¿…è¦æ™‚ã«ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå‡ºåŠ›
                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ .agentmine/   â”‚
         â”‚ â”œâ”€â”€ agents/   â”‚ â† ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨
         â”‚ â”œâ”€â”€ memory/   â”‚ â† ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨
         â”‚ â””â”€â”€ config.yamlâ”‚ â† ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Workerå®Ÿè¡Œæ™‚ãƒ•ãƒ­ãƒ¼

```
Workerèµ·å‹•æ™‚ã®ã¿ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    DB    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ agentmine worker run 5
     â”‚
     â”œâ”€â†’ Agentå®šç¾©å–å¾— â†’ promptContentç”Ÿæˆ
     â”œâ”€â†’ Memory Bankå–å¾— â†’ .agentmine/memory/ å‡ºåŠ›
     â””â”€â†’ è¨­å®šå–å¾— â†’ ã‚¹ã‚³ãƒ¼ãƒ—é©ç”¨

         â–¼
   worktree/.agentmine/memory/
   â”œâ”€â”€ architecture/
   â”‚   â””â”€â”€ 1.md
   â””â”€â”€ tooling/
       â””â”€â”€ 2.md
```

---

## ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ vs DB

### ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã®ç”¨é€”

âœ… **ç”¨é€”**:
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è¨­å®šã‚³ãƒ”ãƒ¼
- ç§»è¡Œï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ï¼‰
- Workerå‚ç…§ï¼ˆread-onlyï¼‰
- Gitç®¡ç†ï¼ˆå¿…è¦ãªå ´åˆï¼‰

âŒ **éç”¨é€”**:
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†ï¼ˆDBã§è¡Œã†ï¼‰
- çœŸå®Ÿæºï¼ˆã‚ãã¾ã§ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼‰

### DBï¼ˆãƒã‚¹ã‚¿ãƒ¼ï¼‰ã®ç”¨é€”

âœ… **ç”¨é€”**:
- ã™ã¹ã¦ã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…±æœ‰
- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- å¤‰æ›´å±¥æ­´ç®¡ç†
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³

---

## ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå‡ºåŠ›

### æ‰‹å‹•ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

```bash
# å…¨ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
agentmine export --output ./backup/

# å€‹åˆ¥ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
agentmine agent export coder --output ./coder.yaml
agentmine memory export --output ./memory/
```

å‡ºåŠ›çµæœ:
```
./backup/
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ coder.yaml
â”‚   â””â”€â”€ reviewer.yaml
â”œâ”€â”€ memory/
â”‚   â”œâ”€â”€ architecture/
â”‚   â”‚   â””â”€â”€ 1.md
â”‚   â””â”€â”€ tooling/
â”‚       â””â”€â”€ 2.md
â””â”€â”€ config.yaml
```

### è‡ªå‹•å‡ºåŠ›ï¼ˆWorkerèµ·å‹•æ™‚ï¼‰

```bash
agentmine worker run 5
```

agentmineãŒè‡ªå‹•çš„ã«ï¼š
1. Memory Bankã‚’å–å¾—
2. `worktree/.agentmine/memory/` ã«å‡ºåŠ›ï¼ˆread-onlyï¼‰
3. Workerèµ·å‹•

---

## Gité€£æº

### .gitignoreæˆ¦ç•¥

```gitignore
# .gitignore

.agentmine/
!.agentmine/.gitkeep
```

**ç†ç”±**:
- DBãŒãƒã‚¹ã‚¿ãƒ¼ãªã®ã§ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¯ãƒªãƒã‚¸ãƒˆãƒªä¸è¦
- å¿…è¦ãªã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå…ˆã‚’åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æŒ‡å®š

### Gitç®¡ç†ãŒå¿…è¦ãªå ´åˆ

```bash
# ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå…ˆã‚’å¤‰æ›´
agentmine memory export --output ./docs/memory/

# Gitç®¡ç†
git add docs/memory/
git commit -m "docs: Memory Bankæ›´æ–°"
```

---

## ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆç§»è¡Œç”¨ï¼‰

æ—¢å­˜YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰DBã¸ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼š

```bash
# æ—¢å­˜ã®.agentmine/ã‹ã‚‰DBã¸
agentmine db import --from .agentmine/

# å€‹åˆ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
agentmine agent import --file ./coder.yaml
agentmine memory import --dir ./memory/
```

**ç”¨é€”**:
- æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ã®ç§»è¡Œ
- ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã®è¨­å®šã‚³ãƒ”ãƒ¼
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®å¾©å…ƒ

---

## DBæˆ¦ç•¥

### PostgreSQLï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰

**ç”¨é€”**: ãƒãƒ¼ãƒ é–‹ç™ºãƒ»æœ¬ç•ªç’°å¢ƒ

**ãƒ¡ãƒªãƒƒãƒˆ**:
- è¤‡æ•°äººã§ã®åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ»æ’ä»–åˆ¶å¾¡
- pgvectorã«ã‚ˆã‚‹ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ï¼ˆå°†æ¥ï¼‰
- å¤‰æ›´å±¥æ­´ãƒ»ç›£æŸ»ãƒ­ã‚°ã®ä¸€å…ƒç®¡ç†

**æ¥ç¶š**:
```bash
export AGENTMINE_DB_URL="postgresql://user:pass@localhost:5432/agentmine"
agentmine init
```

### SQLiteï¼ˆã‚µãƒ–ï¼‰

**ç”¨é€”**: å€‹äººé–‹ç™ºãƒ»ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ã‚¼ãƒ­è¨­å®šï¼ˆ`agentmine init`ã§å³ä½¿ç”¨å¯èƒ½ï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã§ç°¡å˜
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç’°å¢ƒ

**æ¥ç¶š**:
```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
agentmine init
# â†’ .agentmine/data.db ãŒä½œæˆã•ã‚Œã‚‹
```

ğŸ”— @../04-data/overview.md - DBæˆ¦ç•¥ã®è©³ç´°

---

## å®Ÿè£…ä¾‹

### Agentå®šç¾©ã®ä½œæˆ

```typescript
// CLI/Web UI/MCPã‹ã‚‰å‘¼ã°ã‚Œã‚‹
import { agentService } from '@agentmine/core';

// DBã«ä¿å­˜
const agent = await agentService.createAgent({
  name: 'coder',
  client: 'claude-code',
  model: 'sonnet',
  scope: {
    read: ['**/*'],
    write: ['src/**', 'tests/**'],
    exclude: ['**/*.env'],
  },
  promptContent: `
# Coder Agent

ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã«å¾“ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
  `,
});

// â†’ agents ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
// â†’ agent_history ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¨˜éŒ²
```

### Memory Bankã®ä½œæˆ

```typescript
import { memoryService } from '@agentmine/core';

// DBã«ä¿å­˜ï¼ˆidã¯è‡ªå‹•æ¡ç•ªï¼‰
const memory = await memoryService.createMemory({
  category: 'architecture',
  title: 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é¸å®š',
  summary: 'PostgreSQLï¼ˆæœ¬ç•ªï¼‰/ SQLiteï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰',
  status: 'active',
  content: `
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é¸å®š

## æ±ºå®š
PostgreSQLï¼ˆæœ¬ç•ªï¼‰ã€SQLiteï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰

## ç†ç”±
- pgvectorã«ã‚ˆã‚‹AIæ©Ÿèƒ½ã®è¦ªå’Œæ€§
- SQLiteã¯ã‚¼ãƒ­è¨­å®šã§ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã«æœ€é©
  `,
});

// â†’ memories ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
// â†’ memory_history ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¨˜éŒ²
```

### Workerèµ·å‹•æ™‚ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå‡ºåŠ›

```typescript
// agentmine worker run å†…éƒ¨å‡¦ç†

import { memoryService } from '@agentmine/core';
import fs from 'fs/promises';
import path from 'path';

async function exportMemoryToWorktree(worktreePath: string) {
  // 1. DBã‹ã‚‰å–å¾—
  const memories = await memoryService.listMemories({
    status: 'active'
  });

  // 2. ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›
  const outputDir = path.join(worktreePath, '.agentmine', 'memory');
  await fs.mkdir(outputDir, { recursive: true });

  for (const memory of memories) {
    const categoryDir = path.join(outputDir, memory.category);
    await fs.mkdir(categoryDir, { recursive: true });

    await fs.writeFile(
      path.join(categoryDir, `${memory.id}.md`),
      memoryService.toMarkdown(memory)
    );
  }

  // 3. read-onlyã«è¨­å®š
  await exec(`chmod -R a-w ${outputDir}`);
}
```

---

## ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

### ãƒ¡ãƒªãƒƒãƒˆ

âœ… **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: 1ç®‡æ‰€æ›´æ–°ã§å…¨ã¦æœ€æ–°
âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…±æœ‰**: ãƒãƒ¼ãƒ å…¨å“¡ãŒåŒã˜ãƒ‡ãƒ¼ã‚¿
âœ… **å¤‰æ›´å±¥æ­´**: ã„ã¤èª°ãŒä½•ã‚’å¤‰æ›´ã—ãŸã‹ãƒˆãƒ¬ãƒ¼ã‚¹
âœ… **æ¤œç´¢åŠ¹ç‡**: SQL/ORMã§é«˜é€Ÿã‚¯ã‚¨ãƒª
âœ… **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**: è¤‡æ•°å¤‰æ›´ã®åŸå­æ€§ä¿è¨¼

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

âš ï¸ **DBå¿…é ˆ**: DBãªã—ã§ã¯å‹•ä½œã—ãªã„ï¼ˆSQLiteã§è»½æ¸›ï¼‰
âš ï¸ **ç§»è¡Œã‚³ã‚¹ãƒˆ**: æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®ç§»è¡ŒãŒå¿…è¦
âš ï¸ **Git Diff**: ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’Gitç®¡ç†ã—ãªã„ã¨å·®åˆ†ãŒè¦‹ãˆã«ãã„

---

## ã‚ˆãã‚ã‚‹è³ªå•

### Q1: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ç·¨é›†ã—ãŸã‚‰åæ˜ ã•ã‚Œã¾ã™ã‹ï¼Ÿ

**A**: ã„ã„ãˆã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãªã®ã§ã€ç·¨é›†ã—ã¦ã‚‚åæ˜ ã•ã‚Œã¾ã›ã‚“ã€‚DBã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

```bash
# âŒ ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ï¼ˆåæ˜ ã•ã‚Œãªã„ï¼‰
vim .agentmine/agents/coder.yaml

# âœ… DBã‚’æ›´æ–°ï¼ˆæ­£ã—ã„ï¼‰
agentmine agent update coder --model opus
```

### Q2: ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’Gitç®¡ç†ã™ã¹ãã§ã™ã‹ï¼Ÿ

**A**: åŸºæœ¬çš„ã«ã¯ä¸è¦ã§ã™ã€‚DBãŒãƒã‚¹ã‚¿ãƒ¼ãªã®ã§ã€‚ãŸã ã—ã€ä»¥ä¸‹ã®å ´åˆã¯Gitç®¡ç†ã‚’æ¤œè¨ï¼š
- å¤‰æ›´å±¥æ­´ã‚’å¯è¦–åŒ–ã—ãŸã„
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã«å«ã‚ãŸã„
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ã—ã¦æ®‹ã—ãŸã„

ãã®å ´åˆã¯ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå…ˆã‚’åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ï¼š
```bash
agentmine memory export --output ./docs/memory/
git add docs/memory/
```

### Q3: DBãŒå£Šã‚ŒãŸã‚‰ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ

**A**: å®šæœŸçš„ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã£ã¦ãã ã•ã„ï¼š
```bash
# å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
agentmine export --output ./backup/$(date +%Y%m%d)/

# å¾©å…ƒ
agentmine db import --from ./backup/20260120/
```

### Q4: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ä½œæ¥­ã§ãã¾ã™ã‹ï¼Ÿ

**A**: SQLiteã‚’ä½¿ãˆã°ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½œæ¥­å¯èƒ½ã§ã™ï¼š
```bash
export AGENTMINE_DB_URL="file:.agentmine/data.db"
agentmine init
```

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- @../02-architecture/design-principles.md - Single Source of TruthåŸå‰‡
- @../04-data/overview.md - DBæˆ¦ç•¥ï¼ˆPostgreSQL + SQLiteï¼‰
- @../04-data/schema.md - DBã‚¹ã‚­ãƒ¼ãƒå®šç¾©
- @../04-data/export-import.md - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- @../10-decisions/002-sqlite-default.md - DBé¸å®šã®ADR
