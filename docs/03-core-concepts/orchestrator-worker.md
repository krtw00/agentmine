# Orchestrator / Worker ãƒ¢ãƒ‡ãƒ«

ğŸ¯ **æœ€é‡è¦æ¦‚å¿µ**: agentmineã®ä¸­æ ¸ã¨ãªã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

agentmineã¯**Orchestrator/Workerãƒ¢ãƒ‡ãƒ«**ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€ŒAI as Orchestratorã€è¨­è¨ˆåŸå‰‡ã‚’å…·ä½“åŒ–ã—ãŸã‚‚ã®ã§ã™ã€‚

---

## æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                      â”‚
â”‚  Human (ãƒ¦ãƒ¼ã‚¶ãƒ¼)                                                    â”‚
â”‚    â”‚ ã€Œ3ã¤ã®ã‚¿ã‚¹ã‚¯ã‚’ä¸¦åˆ—ã§å®Ÿè¡Œã—ã¦ã€                                 â”‚
â”‚    â–¼                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Orchestrator (Claude Codeç­‰)                 â”‚ â”‚
â”‚  â”‚                                                                  â”‚ â”‚
â”‚  â”‚  1. ã‚¿ã‚¹ã‚¯åˆ†æãƒ»è¨ˆç”»                                             â”‚ â”‚
â”‚  â”‚  2. agentmine worker run --exec --detach                       â”‚ â”‚
â”‚  â”‚     (worktreeä½œæˆ + scopeé©ç”¨ + sessioné–‹å§‹)                    â”‚ â”‚
â”‚  â”‚  3. å®Œäº†å¾…ã¡ï¼ˆworker wait / statusï¼‰                            â”‚ â”‚
â”‚  â”‚  4. ãƒãƒ¼ã‚¸åˆ¤æ–­ãƒ»å®Ÿè¡Œï¼ˆOrchestratorãŒæ±ºå®šï¼‰                       â”‚ â”‚
â”‚  â”‚  5. PRä½œæˆ                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                                            â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚          â–¼              â–¼              â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Worker    â”‚ â”‚   Worker    â”‚ â”‚   Worker    â”‚                   â”‚
â”‚  â”‚  (Task #3)  â”‚ â”‚  (Task #4)  â”‚ â”‚  (Task #5)  â”‚                   â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚                   â”‚
â”‚  â”‚ worktree-3/ â”‚ â”‚ worktree-4/ â”‚ â”‚ worktree-5/ â”‚                   â”‚
â”‚  â”‚ scopeé©ç”¨æ¸ˆ â”‚ â”‚ scopeé©ç”¨æ¸ˆ â”‚ â”‚ scopeé©ç”¨æ¸ˆ â”‚                   â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚                   â”‚
â”‚  â”‚ â€»agentmine â”‚ â”‚ â€»agentmine â”‚ â”‚ â€»agentmine â”‚                   â”‚
â”‚  â”‚   éä½¿ç”¨    â”‚ â”‚   éä½¿ç”¨    â”‚ â”‚   éä½¿ç”¨    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚              â”‚              â”‚                             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                        â”‚ (exit code / signal)                       â”‚
â”‚                        â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   agentmine (Blackboard)                        â”‚ â”‚
â”‚  â”‚                                                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚ â”‚
â”‚  â”‚  â”‚  Tasks   â”‚  â”‚ Sessions â”‚  â”‚ Memory Bank  â”‚                  â”‚ â”‚
â”‚  â”‚  â”‚  çŠ¶æ…‹    â”‚  â”‚  å±¥æ­´    â”‚  â”‚  æ±ºå®šäº‹é …    â”‚                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â”‚
â”‚  â”‚                                                                  â”‚ â”‚
â”‚  â”‚  Orchestratorã®ã¿ãŒã‚¢ã‚¯ã‚»ã‚¹ï¼ˆWorkerã¯éä½¿ç”¨ï¼‰                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å½¹å‰²å®šç¾©

### Orchestratorï¼ˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰

**å®šç¾©**: ä¸¦åˆ—å®Ÿè¡Œã‚’è¨ˆç”»ãƒ»ç›£è¦–ã™ã‚‹AIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€ã¾ãŸã¯äººé–“

**å…¸å‹ä¾‹**:
- Claude Code
- Codex
- Gemini CLI
- äººé–“ï¼ˆæ‰‹å‹•å®Ÿè¡Œï¼‰

**è²¬å‹™**:
1. **è¨ˆç”»**: ã‚¿ã‚¹ã‚¯ã‚’åˆ†æã—ã€ä¸¦åˆ—å®Ÿè¡Œæˆ¦ç•¥ã‚’æ±ºå®š
2. **èµ·å‹•**: `agentmine worker run` ã§Workerã‚’èµ·å‹•
3. **ç›£è¦–**: WorkerçŠ¶æ…‹ã‚’ç›£è¦–ï¼ˆ`worker status` / `wait`ï¼‰
4. **DoDæ¤œè¨¼**: lint/test/build ã‚’å®Ÿè¡Œ
5. **ãƒãƒ¼ã‚¸åˆ¤æ–­**: ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±ºã€ãƒãƒ¼ã‚¸å®Ÿè¡Œ
6. **PRä½œæˆ**: å®Œæˆã—ãŸã‚³ãƒ¼ãƒ‰ã‚’PRã«ã¾ã¨ã‚ã‚‹

**ã‚„ã‚‰ãªã„ã“ã¨**:
- âŒ ã‚³ãƒ¼ãƒ‰ä½œæˆï¼ˆãã‚Œã¯Workerã®ä»•äº‹ï¼‰
- âŒ worktreeå†…ã§ã®ä½œæ¥­

### Workerï¼ˆãƒ¯ãƒ¼ã‚«ãƒ¼ï¼‰

**å®šç¾©**: éš”é›¢ã•ã‚ŒãŸworktreeå†…ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

**ç‰¹å¾´**:
- å°‚ç”¨worktreeã§ä½œæ¥­ï¼ˆ`.agentmine/worktrees/task-<id>/`ï¼‰
- ã‚¹ã‚³ãƒ¼ãƒ—åˆ¶å¾¡é©ç”¨æ¸ˆã¿
- agentmineã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãªã„ï¼ˆå®Œå…¨éš”é›¢ï¼‰
- è‡ªå‹•æ‰¿èªãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ

**è²¬å‹™**:
1. **ã‚³ãƒ¼ãƒ‰ä½œæˆ**: ã‚¿ã‚¹ã‚¯ã«å¾“ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
2. **ãƒ†ã‚¹ãƒˆè¿½åŠ **: å¿…è¦ãªãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
3. **ã‚³ãƒŸãƒƒãƒˆ**: å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ

**ã‚„ã‚‰ãªã„ã“ã¨**:
- âŒ ã‚¿ã‚¹ã‚¯ç®¡ç†
- âŒ ä»–ã®Workerã¨ã®é€šä¿¡
- âŒ ãƒãƒ¼ã‚¸åˆ¤æ–­
- âŒ agentmine CLIå®Ÿè¡Œ

### agentmine

**å®šç¾©**: Blackboardï¼ˆå…±æœ‰ãƒ‡ãƒ¼ã‚¿é ˜åŸŸï¼‰å…¼å®Ÿè¡ŒåŸºç›¤

**è²¬å‹™**:
1. **ãƒ‡ãƒ¼ã‚¿ç®¡ç†**: DBï¼ˆtasks, sessions, agents, memoriesï¼‰
2. **worktreeç®¡ç†**: ä½œæˆãƒ»å‰Šé™¤ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—é©ç”¨
3. **Workerèµ·å‹•**: AIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè¡Œ
4. **ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²**: exit code, artifacts, duration
5. **Memory Bankæä¾›**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ±ºå®šäº‹é …ã®æ³¨å…¥

**ã‚„ã‚‰ãªã„ã“ã¨**:
- âŒ ä¸¦åˆ—å®Ÿè¡Œã®è¨ˆç”»
- âŒ ãƒãƒ¼ã‚¸åˆ¤æ–­
- âŒ ãƒªãƒˆãƒ©ã‚¤åˆ¤æ–­
- âŒ ã‚³ãƒ¼ãƒ‰ä½œæˆ

---

## è²¬å‹™åˆ†æ‹…ã®è©³ç´°

### Orchestratorã®è²¬å‹™

#### 1. ä¸¦åˆ—å®Ÿè¡Œã®è¨ˆç”»

```typescript
// Orchestratorã®æ€è€ƒä¾‹ï¼ˆæ“¬ä¼¼ã‚³ãƒ¼ãƒ‰ï¼‰

// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã€Œtask #3, #4, #5ã‚’ä¸¦åˆ—ã§ã€ã¨ä¾é ¼

// 1. ã‚¿ã‚¹ã‚¯æƒ…å ±å–å¾—
const tasks = await exec('agentmine task list --json');

// 2. ä¾å­˜é–¢ä¿‚åˆ†æ
if (task3.dependsOn.includes(task4.id)) {
  // task4ã‚’å…ˆã«å®Ÿè¡Œ
  await exec('agentmine worker run 4 --exec');
  await exec('agentmine worker done 4');
}

// 3. ä¸¦åˆ—èµ·å‹•
await Promise.all([
  exec('agentmine worker run 3 --exec --detach'),
  exec('agentmine worker run 5 --exec --detach'),
]);
```

#### 2. Workerç›£è¦–

```bash
# OrchestratorãŒå®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰

# çŠ¶æ…‹ç¢ºèª
agentmine worker status

# å®Œäº†å¾…ã¡
agentmine worker wait 3 5

# ã‚¨ãƒ©ãƒ¼ç¢ºèª
agentmine session list --status failed
```

#### 3. DoDæ¤œè¨¼

```bash
# OrchestratorãŒå„worktreeã§DoDæ¤œè¨¼

cd .agentmine/worktrees/task-3
pnpm lint && pnpm test && pnpm build

# æˆåŠŸ â†’ ãƒãƒ¼ã‚¸
# å¤±æ•— â†’ Workerå†å®Ÿè¡Œ or äººé–“ã«é€šçŸ¥
```

#### 4. ãƒãƒ¼ã‚¸åˆ¤æ–­

```bash
# OrchestratorãŒåˆ¤æ–­ã—ã¦ãƒãƒ¼ã‚¸å®Ÿè¡Œ

# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãªã— â†’ è‡ªå‹•ãƒãƒ¼ã‚¸
git merge task-3-s101

# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚ã‚Š â†’ OrchestratorãŒè§£æ±º
git merge task-3-s101  # conflict
# ... OrchestratorãŒã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±º ...
git commit
```

### Workerã®è²¬å‹™

#### 1. ã‚³ãƒ¼ãƒ‰ä½œæˆ

Workerã¯ä¸ãˆã‚‰ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆpromptContent + Memory Bank + ã‚¿ã‚¹ã‚¯ï¼‰ã«å¾“ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€‚

**WorkerãŒå—ã‘å–ã‚‹æƒ…å ±**:
```markdown
## Memory Bank Summary
- ãƒ«ãƒ¼ãƒ«: ãƒã‚°ä¿®æ­£æ™‚ã¯å¿…ãšå›å¸°ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
- è¦ç´„: ã‚³ãƒŸãƒƒãƒˆå½¢å¼ã¯Conventional Commits
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£: DBã¯PostgreSQLï¼ˆæœ¬ç•ªï¼‰/ SQLiteï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰

## Project Context (Memory Bank)
The following project context files are available:
- .agentmine/memory/architecture/1.md
- .agentmine/memory/tooling/2.md

## ã‚¿ã‚¹ã‚¯
**ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã‚’å®Ÿè£…**
POST /api/login ã§JWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¿”ã™APIã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
```

#### 2. ã‚¹ã‚³ãƒ¼ãƒ—éµå®ˆ

Workerã¯ç‰©ç†çš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ç·¨é›†ï¼š
- `src/` - writeå¯èƒ½
- `tests/` - writeå¯èƒ½
- `docs/` - read-only
- `.env` - å­˜åœ¨ã—ãªã„ï¼ˆexcludedï¼‰

### agentmineã®è²¬å‹™

#### 1. worktreeä½œæˆ

```bash
# agentmineãŒå†…éƒ¨ã§å®Ÿè¡Œï¼ˆOrchestratorã¯æ„è­˜ã—ãªã„ï¼‰

git worktree add .agentmine/worktrees/task-3 -b task-3-s123
cd .agentmine/worktrees/task-3
git sparse-checkout set src/ tests/ package.json
# excludeãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ.envç­‰ï¼‰ã‚’è‡ªå‹•é™¤å¤–
```

#### 2. Workerèµ·å‹•

```bash
# agentmine worker run ã®å†…éƒ¨å‹•ä½œ

# 1. ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ï¼ˆDBã«è¨˜éŒ²ï¼‰
# 2. worktreeä½œæˆ
# 3. ã‚¹ã‚³ãƒ¼ãƒ—é©ç”¨
# 4. Memory Bankå‡ºåŠ›
# 5. promptContentç”Ÿæˆ
# 6. AIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆèµ·å‹•
claude-code exec --dangerously-skip-permissions "$PROMPT"
```

#### 3. ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²

```typescript
// Workerçµ‚äº†æ™‚ã«agentmineãŒè¨˜éŒ²

await db.update(sessions)
  .set({
    status: 'completed',
    exitCode: process.exitCode,
    completedAt: new Date(),
    artifacts: changedFiles, // git diffã‹ã‚‰è‡ªå‹•åé›†
  })
  .where(eq(sessions.id, sessionId));
```

---

## é€šä¿¡ãƒ•ãƒ­ãƒ¼

### Orchestrator â†’ agentmine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Orchestrator   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ agentmine worker run 3 --exec --detach
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   agentmine     â”‚
â”‚   - worktreeä½œæˆ â”‚
â”‚   - Workerèµ·å‹•   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ sessionId, pid, worktreePath
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Orchestrator   â”‚
â”‚  (ç›£è¦–ç¶™ç¶š)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Worker â†’ agentmine

**é‡è¦**: Workerã¯agentmineã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãªã„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Worker      â”‚
â”‚  (éš”é›¢ç’°å¢ƒ)      â”‚
â”‚   â†“             â”‚
â”‚  ã‚³ãƒ¼ãƒ‰ä½œæˆ      â”‚
â”‚   â†“             â”‚
â”‚  git commit     â”‚
â”‚   â†“             â”‚
â”‚  exit           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ exit code
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   agentmine     â”‚
â”‚  (exit codeè¨˜éŒ²) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…¸å‹çš„ãªå®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³

```
Orchestrator                      agentmine                Git / Workers
 â”‚                                  â”‚                           â”‚
 â”‚  1. ã‚¿ã‚¹ã‚¯å–å¾—                   â”‚                           â”‚
 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚  agentmine task list --json      â”‚                           â”‚
 â”‚                                   â”‚                           â”‚
 â”‚  2. Workerèµ·å‹•ï¼ˆä¸¦åˆ—ï¼‰            â”‚                           â”‚
 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚  agentmine worker run 3 --exec --detach                      â”‚
 â”‚                                   â”‚  git worktree add ...     â”‚
 â”‚                                   â”‚  git sparse-checkout ...  â”‚
 â”‚                                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                                   â”‚                     (ä½œæ¥­)â”‚
 â”‚                                   â”‚                           â”‚
 â”‚  3. Workerå®Œäº†å¾…ã¡                â”‚                           â”‚
 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚  agentmine worker wait 3          â”‚                           â”‚
 â”‚                                   â”‚                           â”‚
 â”‚  4. DoDæ¤œè¨¼                        â”‚                           â”‚
 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚  cd worktree && pnpm test         â”‚                           â”‚
 â”‚                                   â”‚                           â”‚
 â”‚  5. ãƒãƒ¼ã‚¸åˆ¤æ–­ãƒ»å®Ÿè¡Œ                â”‚                           â”‚
 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚  git merge task-3-s123             â”‚                           â”‚
 â”‚                                   â”‚                           â”‚
 â”‚  6. å®Œäº†å‡¦ç†                       â”‚                           â”‚
 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                           â”‚
 â”‚  agentmine worker done 3          â”‚                           â”‚
```

---

## åˆ©ç‚¹

### 1. è²¬å‹™åˆ†é›¢

- Orchestrator: è¨ˆç”»ãƒ»åˆ¤æ–­
- Worker: ã‚³ãƒ¼ãƒ‰ä½œæˆ
- agentmine: å®Ÿè¡ŒåŸºç›¤

â†’ ãã‚Œãã‚ŒãŒå°‚å¿µã§ãã‚‹

### 2. æŸ”è»Ÿæ€§

Orchestratorã¯çŠ¶æ³ã«å¿œã˜ã¦æˆ¦ç•¥ã‚’å¤‰æ›´å¯èƒ½ï¼š
- ä¸¦åˆ—æ•°ã®èª¿æ•´
- å„ªå…ˆé †ä½ã®å¤‰æ›´
- ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥

### 3. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

Workerã‚’å¢—ã‚„ã™ã“ã¨ã§ä¸¦åˆ—åº¦ã‚’å‘ä¸Šï¼š
```bash
# 4ã¤ä¸¦åˆ—
agentmine worker run 1 --exec --detach
agentmine worker run 2 --exec --detach
agentmine worker run 3 --exec --detach
agentmine worker run 4 --exec --detach
```

### 4. å®‰å…¨æ€§

Workeréš”é›¢ã«ã‚ˆã‚Šï¼š
- äº’ã„ã«å¹²æ¸‰ã—ãªã„
- ã‚¹ã‚³ãƒ¼ãƒ—åˆ¶å¾¡ã§æ„å›³ã—ãªã„å¤‰æ›´ã‚’é˜²æ­¢

---

## ã‚ˆãã‚ã‚‹è³ªå•

### Q1: Workerã¯ä»–ã®Workerã¨é€šä¿¡ã§ãã¾ã™ã‹ï¼Ÿ

**A**: ã„ã„ãˆã€ã§ãã¾ã›ã‚“ã€‚Workerã¯å®Œå…¨ã«éš”é›¢ã•ã‚Œã¦ã„ã¾ã™ã€‚èª¿æ•´ãŒå¿…è¦ãªå ´åˆã¯OrchestratorãŒè¡Œã„ã¾ã™ã€‚

### Q2: WorkerãŒå¤±æ•—ã—ãŸã‚‰ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ

**A**: agentmineãŒã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’`failed`ã«è¨˜éŒ²ã—ã€Orchestratorã«é€šçŸ¥ã—ã¾ã™ã€‚ãƒªãƒˆãƒ©ã‚¤åˆ¤æ–­ã¯OrchestratorãŒè¡Œã„ã¾ã™ã€‚

### Q3: Orchestratorã¯äººé–“ã§ã‚‚ã‚ˆã„ã§ã™ã‹ï¼Ÿ

**A**: ã¯ã„ã€‚äººé–“ãŒCLIã‚’æ‰‹å‹•ã§å®Ÿè¡Œã—ã¦ã‚‚OKã§ã™ã€‚ãŸã ã—ã€AIãŒè‡ªå‹•ã§åˆ¤æ–­ãƒ»å®Ÿè¡Œã™ã‚‹æ–¹ãŒåŠ¹ç‡çš„ã§ã™ã€‚

### Q4: Web UIã¯ã©ã®å½¹å‰²ã§ã™ã‹ï¼Ÿ

**A**: Web UIã¯ä¸»ã«äººé–“ç”¨ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã™ã€‚ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ»Agentå®šç¾©ãƒ»Workerç›£è¦–ã‚’è¡Œã„ã¾ã™ãŒã€Orchestratorçš„ãªåˆ¤æ–­ã¯ã—ã¾ã›ã‚“ã€‚

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- @../02-architecture/design-principles.md - AI as OrchestratoråŸå‰‡
- @../07-runtime/worker-lifecycle.md - Workerèµ·å‹•ã‹ã‚‰çµ‚äº†ã¾ã§
- @../07-runtime/parallel-execution.md - ä¸¦åˆ—å®Ÿè¡Œã®è©³ç´°
- @./scope-control.md - ã‚¹ã‚³ãƒ¼ãƒ—åˆ¶å¾¡ã®ä»•çµ„ã¿
- @../appendix/glossary.md - ç”¨èªå®šç¾©
