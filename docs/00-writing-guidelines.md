# ドキュメント記載方針

## 目的

このドキュメントは、AgentMineプロジェクトのドキュメント作成における方針を定める。
設計ドキュメントは「何をしたいか」「なぜそうするか」「どう実現するか」を伝えるものであり、実装ガイドではない。

## 基本原則

### 1. コードは書かない

設計ドキュメントにコードブロックは原則として含めない。

**書かないもの:**
- TypeScript/JavaScript のコード
- SQL DDL / スキーマ定義
- 詳細なYAML/JSON設定例
- API リクエスト/レスポンスの具体例

**例外（最小限に）:**
- CLIコマンドの使用例（1-2行程度）
- 概念を示す擬似コード（実装とは異なることを明記）
- ディレクトリ構造（シンプルなもののみ）

### 2. 文章で説明する

コードで示したくなる内容は、文章や表で表現する。

**良い例:**
> タスクは「タイトル」「説明」「ステータス」「優先度」「担当者」を持つ。
> ステータスは open → in_progress → done/failed の順で遷移する。

**悪い例:**
```typescript
interface Task {
  title: string;
  description: string;
  status: 'open' | 'in_progress' | 'done' | 'failed';
  // ... 50行続く
}
```

### 3. 図は歓迎（Mermaid推奨）

図は積極的に使う。GitHubがネイティブサポートしている**Mermaid記法**を推奨。

**使える図の種類:**
- フローチャート（flowchart）- 処理の流れ
- シーケンス図（sequenceDiagram）- 時系列のやり取り
- 状態遷移図（stateDiagram）- ステータスの変化
- ER図（erDiagram）- データの関係性
- ガントチャート（gantt）- スケジュール

ASCIIアートは簡単なレイアウト図（UI wireframe等）に使う。

### 4. Why を重視

「何をするか」だけでなく「なぜそうするか」を必ず書く。
背景や理由がないと、後から見たときに判断できない。

### 5. 未確定事項は明記

決まっていないことは「未確定」と明記する。
推測や仮決定を確定事項のように書かない。

## ドキュメント構成

### 必須セクション

全ドキュメントに必要：

| セクション | 説明 |
|-----------|------|
| 目的 | このドキュメントが説明すること、SSoT宣言 |
| 関連ドキュメント | 参照先リンク（用語集含む） |

### 推奨セクション

設計ドキュメントに推奨：

| セクション | 説明 |
|-----------|------|
| 背景 | なぜこの機能/設計が必要か（Why） |
| 設計原則/方針 | どのようなアプローチで実現するか |
| 未確定事項 | 今後決める必要があること |

### ドキュメント種類別構成

| 種類 | 推奨構成 |
|------|---------|
| 概要（overview） | 目的 → 概要説明 → 詳細 → 関連 |
| 設計（architecture, core-concepts） | 目的 → 背景 → 設計原則 → 詳細 → 関連 |
| ADR（10-decisions） | Status → Context → Decision → Consequences |
| インターフェース（cli, mcp, web） | 目的 → 背景 → コマンド/ツール一覧 → 関連 |
| 手順（installation, contributing） | 目的 → 前提条件 → 手順 → 関連 |

## 相互参照（@リンク記法）

ドキュメント間の参照には `@` で始まる相対パスを使用する。

### 記法

| 表記 | 意味 |
|------|------|
| @02-architecture/architecture.md | docs/からの相対パス |
| @appendix/glossary.md | docs/appendix/glossary.md |

### 解決方法

@リンクはdocsディレクトリをルートとした相対パスとして解釈する。

| 記述場所 | @リンク | 実際のパス |
|---------|--------|-----------|
| 01-introduction/overview.md | @02-architecture/architecture.md | docs/02-architecture/architecture.md |
| 03-core-concepts/db-master.md | @appendix/glossary.md | docs/appendix/glossary.md |

### 使用ルール

| ルール | 説明 |
|--------|------|
| SSoT参照 | 詳細はSSoTドキュメントを参照するよう誘導 |
| 関連ドキュメント | 各ドキュメント末尾に関連ドキュメントセクションを設置 |
| 必須リンク | 用語集（@appendix/glossary.md）へのリンクを推奨 |

## アンチパターン

避けるべき記述：

- 「実装例」「サンプルコード」セクション
- 100行を超えるコードブロック
- APIの全エンドポイント定義
- データベーススキーマの完全な定義
- 設定ファイルの全オプション列挙

## 更新ルール

- 設計変更時はドキュメントも更新する
- 古くなった内容は削除するか「廃止」と明記
- 実装と乖離した記述は放置しない
